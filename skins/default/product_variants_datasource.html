<script type="text/javascript">
jQuery(document).ready(function($){
	{$datasourceJS}

	$(".product_variants select.level_1").change(function(){
		$first_select = $(this);
		$current_container = $first_select.parent(".product_variants");

		$selected_value = $first_select.val();
		$product_srl = $current_container.attr("id").substr("product_variants_".length);

		$second_select = $first_select.next("select.level_2");
		if($second_select.length)
		{
			$options_list = associated_products[$product_srl][$selected_value];
			$second_select.html("");
			$.each($options_list, function(attribute, associated_product_srl){
				$second_select.append("<option value='" + associated_product_srl + "'>" + attribute + "</option>");
			});

			$second_select.trigger("change");
		}
		else
		{
			$associated_product_srl = associated_products[$product_srl][$selected_value];
			$current_container.find("#product_srl").val($associated_product_srl);
		}
		});

	$(".product_variants select.level_2").change(function(){
		$current_container = $(this).parent(".product_variants");
		$selected_value = $(this).val();

		$current_container.find("#product_srl").val($selected_value);
	});
});

</script>