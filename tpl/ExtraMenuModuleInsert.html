<include target="_tool_header.html" />
<load target="css/form.css" />

<style type="text/css">
#http_prefix
{
	margin-left: 8px;
}
#text_url
{
	margin-left: 0;
}
</style>

<script type="text/javascript">
    jQuery(document).ready(function($){
	    var showUrl = function() {
			hideAll();
			$("#text_url_container").show();
		};
	    var showMidList = function($module_type) {
			hideAll();

			$.exec_json('shop.procShopServiceGetModulesByType'
				, { module_type : $module_type}
				, function(data) {
					if(data.error != 0)
					{
						alert("Error " + data.error + " " + data.message);
						return;
					}
				    $mid_list = data.mid_list;

					// Remove previous entries
					$("#mid_url_container select").html("<option value=''></option>");
				    // Add new mids
				    for(var $mid in $mid_list)
					{
						$("#mid_url_container select").append("<option value=" + $mid + ">" + $mid + "</option>");
					}
					$("#mid_url_container").show();
				}
			);
		};
	    var hideAll = function() {
			$("#mid_url_container").hide();
			$("#text_url_container").hide();
		}

	    $("#module_type").change(function(){
		    $selected_value = $(this).val();

			if(!$selected_value)
			{
			    hideAll();
			}
		    else if($selected_value == 'url')
			{
			    showUrl();
			}
			else
			{
			    showMidList($selected_value);
			}
		});
	});
</script>

<!-- Content -->
<div id="content">

	<!-- contentHeader -->
	<div class="contentHeader setupHeader lineBottom">
		<h3 class="h3">{$lang->shop_second_menus[4]['dispShopToolExtraMenuModuleInsert']}</h3>
	</div>
	<!-- /contentHeader -->

	<div class="listHeader">
		<p class="info">{$lang->about_shop_extra_menu}</p>
	</div>

	<form action="./">
	    <input type="hidden" name="vid" value="{$vid}" />
		<input type="hidden" name="act" value="procShopToolInsertMenuItem" />
	    <p>
		    <label for="module_type">Type</label>
			<select id="module_type" name="module_type">
				<option value="">{$lang->cmd_select}</option>
				<!--@foreach($service_modules as $module)-->
				<option value="{$module->module}" title="{$module->description}">{$module->title}</option>
				<!--@end-->
				<option value="url" <!--@if($item_info->module_type == 'url')-->selected="selected"<!--@end-->>{$lang->url}</option>
			</select>

	    </p>

	    <p id="text_url_container" style="display: none">
			<label for="text_url">URL</label>
			<span id="http_prefix">http:// <span><input type="text" id="text_url" name="text_url" />
	    </p>

		<p id="mid_url_container" style="display: none">
			<label for="mid_url">Module</label>
			<select id="mid_url" name="mid_url">
			</select>
		</p>

	    <p>
		    <label for="menu_name">Menu name</label>
		    <input type="text" id="menu_name" name="menu_name" value="" />
	    </p>

		<p class="submit">
			<span class="btnGray medium">
				<input type="submit" value="Submit" class="submit">
			</span>
		</p>


	</form>


</div>

<!-- /Content -->

<!-- Extension -->
<include target="_tool_menu.html" />
<!-- Extension -->
